{
    "collab_server" : "",
    "contents" : "# script to clean data and create \n# data objects to work with\n# loads imported.data\n# and saves to cleaned.data\n\nrequire(data.table)\nrequire(magrittr)\nrequire(tidyr)\n\nload(file = \"~/GoogleDrive/Zoe-Sam/soot/data/imported.data\")\n\n# MP2 energies are still in Hartrees, and column names are still unintelligible\n# f.g.e = fragment, ghost/real, energy\ns88_mp2.dt <- gather(s88_mp2.dt, f.g.e, en, complex_rw2S:frag2_gwSCF) %>%\n    data.table()\n\n# convert to kJ/mol\ns88_mp2.dt[, en := en * 2625.5]\n\ns88_mp2.dt <- separate(s88_mp2.dt, f.g.e, c(\"sys_g\", \"spin_en\"), sep = \"w\") %>%\n    spread(sys_g, en) %>%\n    data.table()\n\n# similarly for ILs\nil_mp2.dt <- gather(il_mp2.dt, f.g.e, en, complex_rwSS:frag2_gwOS) %>%\n    data.table()\n\nil_mp2.dt[, en := en * 2625.5]        # convert to kJ/mol\n\nil_mp2.dt <- separate(il_mp2.dt, f.g.e, c(\"sys_g\", \"spin_en\"), sep = \"w\") %>%\n    spread(sys_g, en) %>%\n    data.table()\n\n# so that no numbers in future column names\ns88_mp2.dt[ , spin_en := as.factor(spin_en)]\nil_mp2.dt[ , spin_en := as.factor(spin_en)]\nlevels(s88_mp2.dt$spin_en) <- c(\"two\", \"OS\", \"SS\", \"SCF\")  # original 2, 2S, 2T, SCF (after ordering due to as.factor)\n\n\n### ============== SETTING KEYS AND FACTOR ORDERS =============== ###\n# order by INCREASING basis set size\ns88_mp2.dt$basis <- factor(s88_mp2.dt$basis, levels = basisList)\nil_mp2.dt$basis <- factor(il_mp2.dt$basis, levels = basisList)\nsetkey(s88_mp2.dt, basis, System, Suite, spin_en)\nsetkey(il_mp2.dt, basis, System, chain, cation, anion, conf, spin_en)\n\n# and others\nsetkey(all_both.dt, System, Suite)\n\n### ============== CALCULATING NEW COLUMNS =============== ###\n# only separated by spen, so that can calculate CP and nonCP\ns88_mp2.dt[, nonCP := complex_r - frag1_r - frag2_r]\ns88_mp2.dt[, CP := complex_r - frag1_g - frag2_g]\n\nil_mp2.dt[, nonCP := complex_r - frag1_r - frag2_r]\nil_mp2.dt[, CP := complex_r - frag1_g - frag2_g]\n\n### ==================== SAVE STUFF ====================== ###\nsave(list = c(\"basisList\", \"all_both.dt\", \"s88_mp2.dt\", \"il_mp2.dt\")\n     , file = \"~/GoogleDrive/Zoe-Sam/soot/data/cleaned.data\")",
    "created" : 1475902866604.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4079336915",
    "id" : "8EC78ABF",
    "lastKnownWriteTime" : 1476169582,
    "last_content_update" : 1476169582712,
    "path" : "~/GoogleDrive/Zoe-Sam/soot/scripts/clean.r",
    "project_path" : "scripts/clean.r",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}