{
    "collab_server" : "",
    "contents" : "# load all the raw data\n# and save it because reading in Excel files is the bottleneck\n\n# copied from load.r of Sam's first srs-mp2 project\n# unless otherwise mentioned, the data come from the same sources\n\nrequire(xlsx)\nrequire(data.table)\nrequire(plyr)\nrequire(magrittr)\n\n\n### ============== READING IN =============== ###\n\n# add interaction type from S66 paper \n# and Grafova JCTC 2010 paper\n# Mon 09 May 2016\n\n\n# ================= CCSD(T)/CBS benchmark energies ================== #\n#                          AND                                        #\n# ================= SAPT2+3/aVDZ energies =========================== #\n# for S22 and S66, CCSD(T) and SAPT2+3 data in one sheet by Santiago\n# BUT WE NEED SAPT2 energies, HENCE WILL READ IN THE OTHER VALUES\ns88_ccsdt.dt <- read.xlsx(file = \"~/GoogleDrive/Zoe-Sam/soot/data/S22_S66_MP2.xlsx\"\n                               , sheetName = \"SAPT\", header = TRUE) %>%\n    data.table()\n\ns22_sapt.dt <- read.table(file = \"~/GoogleDrive/Zoe-Sam/soot/data/S22_aDZ_sapt2.edat\"\n                        , header = TRUE, sep = \"|\", strip.white = TRUE) %>%\n    data.table()\n\ns66_sapt.dt <- read.table(file = \"~/GoogleDrive/Zoe-Sam/soot/data/S66_aDZ_sapt2.edat\"\n                          , header = TRUE, sep = \"|\", strip.white = TRUE) %>%\n    data.table()\n\n# for ILs\n# formerly adapted from the spreadsheet jason_mp2_il1IP.xlsx, sheet CCSDT_cp\n# now with ALL of Jason's energies (should be 174, no more corrEn > 0)\nil_ccsdt.dt <- read.csv(file = \"~/GoogleDrive/Zoe-Sam/soot/data/jason-CBS.csv\"\n                        , header = TRUE) %>%\n    data.table()\n\n\ntestccsd <- read.table(\"~/GoogleDrive/Zoe-Sam/soot/data/il_ccsdDT.edat\", sep = \"|\", \n                     header = TRUE, strip.white = TRUE) %>%\n    data.table()\n\n# extracted 07 Oct 2016 from Raijin\nil_sapt.dt <- read.table(\"~/GoogleDrive/Zoe-Sam/soot/data/il_aDZ_sapt2.edat\"\n                         , sep = \"|\", header = TRUE, strip.white = TRUE) %>%\n    data.table()\n\n\n\n# ================= MP2/VTZ OS & SS (& maybe RefEn for now) ======== #\n\n# for S22 and S66\n# omitting extrapolation (Thur 11 Feb 2016)\nbasisList <- c(\"VDZ\", \"VTZ\", \"VQZ\", \"aVDZ\", \"aVTZ\", \"aVQZ\")\n\n# read them in al list of data.frames, convert to data.table() later\n# DO NOTE THAT AS OF 11 OCT 2016, THE S88 VALUES HAVE SCF ENERGIES AND \n# LOTS OF OTHER COMPONENTS, WHEREAS IL VALUES ONLY HAVE SPIN COMPONENT ENERGIES\ns88_mp2.dt <- lapply(basisList, function(x) read.xlsx(file = \"~/GoogleDrive/Zoe-Sam/soot/data/S22_S66_MP2.xlsx\", \n                                                  sheetName = x, header = TRUE, \n                                                  colInd = c(1:23))) \nil_mp2.dt <- lapply(basisList, function(x) read.xlsx(file = \"~/GoogleDrive/scs-it/data/jason_mp2_il1IP.xlsx\", \n                                                     sheetName = x, header = TRUE))\n# later\n# ================= HF/aVQZ energies =============================== #\n# from Zoe (09 Oct 2016)\n# s22_hf.dt <- read.xlsx(file = \"~/GoogleDrive/Zoe-Sam/soot/data/soot2.xlsx\"\n#                        , sheetName = \"S22\", header = TRUE) %>%\n#     data.table()\n# \n# s66_hf.dt <- read.xlsx(file = \"~/GoogleDrive/Zoe-Sam/soot/data/soot2.xlsx\"\n#                        , sheetName = \"S66\", header = TRUE) %>%\n#     data.table()\n\n\n\n\n### ============== TOUCH-UP's ON RAW DATA =============== ###\n# light! no merging of any kind yet\n\n# omit charge-transfer complexes\ns88_ccsdt.dt <- s88_ccsdt.dt[Suite != \"CT\"]\n# apply factor again to drop CT from factor levels\ns88_ccsdt.dt[, Suite := factor(Suite)]\ns88_ccsdt.dt[, System := factor(System)]\n\n# delete the SAPT columns for old s88\ns88_ccsdt.dt[, c(\"Elst\", \"Exch\", \"Ind\", \"Disp\", \"CT\", \"Total\", \"categ\", \"santiagoCorr\") := NULL]\n\n# calculate correlation energy, by subtracting HF/aVQZ (from Zoe's soot2.xlsx)\ns88_ccsdt.dt[, corrEn := benchmark - HF_aVQZ]\n# then get rid of the columns\n# s88_ccsdt.dt[, benchmark := NULL]\n# s88_ccsdt.dt[, HF_aVQZ := NULL]\n\n\n# SAPT columns\ns22_sapt.dt[, Size := NULL]\ns66_sapt.dt[, Size := NULL]\nil_sapt.dt[, Size := NULL]\n\ns22_sapt.dt[, Suite := as.factor(\"S22\")]\ns66_sapt.dt[, Suite := as.factor(\"S66\")]\n\ns88_sapt.dt <- rbind(s22_sapt.dt, s66_sapt.dt)\n\nsetnames(s88_sapt.dt, c(\"System\" , \"Electrostatics\", \"Exchange\", \"Induction\", \"Dispersion\"\n                        , \"SAPT.Charge.Transfer\", \"Total.HF\", \"Total.SAPT2\", \"Total.SAPT2.3\")\n         , c(\"System\", \"Elst\", \"Exch\", \"Ind\", \"Disp\", \"CT\", \"SAPT.HF\", \"SAPT2\", \"SAPT2.3\"))\n# setnames(s66_sapt.dt, c(\"System\" , \"Electrostatics\", \"Exchange\", \"Induction\", \"Dispersion\"\n#                         , \"SAPT.Charge.Transfer\", \"Total.HF\", \"Total.SAPT2\", \"Total.SAPT2.3\")\n#          , c(\"System\", \"Elst\", \"Exch\", \"Ind\", \"Disp\", \"CT\", \"SAPT.HF\", \"SAPT2\", \"SAPT2.3\"))\nsetnames(il_sapt.dt, c(\"Chain\", \"Cation\", \"Anion\", \"Conf\" \n                       , \"Electrostatics\", \"Exchange\", \"Induction\", \"Dispersion\"\n                       , \"SAPT.Charge.Transfer\", \"Total.HF\", \"Total.SAPT2\", \"Total.SAPT2.3\")\n         , c(\"chain\", \"cation\", \"anion\", \"conf\", \"Elst\", \"Exch\", \"Ind\", \"Disp\", \"CT\", \"SAPT.HF\", \"SAPT2\", \"SAPT2.3\"))\n\n# set keys for merging\nsetkey(s88_ccsdt.dt, System, Suite)\nsetkey(s88_sapt.dt, System, Suite)\n\n# merge new SAPT2 energies with ccsdt, S88\ns88_both.dt <- merge(s88_ccsdt.dt, s88_sapt.dt, all = TRUE)\n\n# \nnames(s88_mp2.dt) <- basisList\nnames(il_mp2.dt) <- basisList\n\n# combine into one\ns88_mp2.dt <- ldply(s88_mp2.dt)\nil_mp2.dt <- ldply(il_mp2.dt)\n\n# column name of basis sets\ncolnames(s88_mp2.dt)[1] <- \"basis\"\ncolnames(il_mp2.dt)[1] <- \"basis\"\n\ns88_mp2.dt <- data.table(s88_mp2.dt)\nil_mp2.dt <- data.table(il_mp2.dt)\n\n# basis column to factor\ns88_mp2.dt[ , basis := as.factor(basis)]\nil_mp2.dt[ , basis := as.factor(basis)]\n\n# create system/name column for IL174 (facilitate merging with S88)\nil_ccsdt.dt[, System := as.factor(paste(chain, cation, anion, conf, sep = \"-\"))]\nil_sapt.dt[, System := as.factor(paste(chain, cation, anion, conf, sep = \"-\"))]\nil_mp2.dt[, System := as.factor(paste(chain, cation, anion, conf, sep = \"-\"))]\n\n# setkeys for merging\nsetkey(il_ccsdt.dt, chain, cation, anion, conf, System)\nsetkey(il_sapt.dt, chain, cation, anion, conf, System)\n\n# merge new SAPT energies with CCSD(T), IL174\nil_both.dt <- merge(il_ccsdt.dt, il_sapt.dt)\n\n# should we delete chain, cation, anion, conf for ILs?? or just drop them when merging, like so\nall_both.dt <- rbind(s88_both.dt, il_both.dt[, !c(\"chain\", \"cation\", \"anion\", \"conf\"), with = FALSE], fill = TRUE)\nall_both.dt[is.na(Suite), Suite := \"IL\"]\n\n\n# save for faster future loading\nsave(list = c(\"basisList\", \"s88_ccsdt.dt\", \"il_ccsdt.dt\", \"s22_sapt.dt\", \"s66_sapt.dt\", \"il_sapt.dt\"\n              , \"s88_both.dt\", \"il_both.dt\", \"all_both.dt\", \"s88_mp2.dt\", \"il_mp2.dt\")\n     , file = \"~/GoogleDrive/Zoe-Sam/soot/data/imported.data\")\n",
    "created" : 1475899341200.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3991636402",
    "id" : "74BA7002",
    "lastKnownWriteTime" : 1476169082,
    "last_content_update" : 1476169082078,
    "path" : "~/GoogleDrive/Zoe-Sam/soot/scripts/load.r",
    "project_path" : "scripts/load.r",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}